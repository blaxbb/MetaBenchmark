@page "/product/{productId}"
@inject DataCache cache;

@using MetaBenchmark.Client.Components
@using MetaBenchmark.Shared

<ProductDetails product="product" allProducts="allProducts"/>

@code {
    Product product;
    List<Product> allProducts;

    [Parameter]
    public string productId { get; set; }

    protected override async Task OnInitializedAsync()
    {
        var all = await cache.All();
        if (all.Value != null && long.TryParse(productId, out long id))
        {
            allProducts = all.Value;
            product = all.Value.FirstOrDefault(p => p.Id == id);
        }
    }

}
